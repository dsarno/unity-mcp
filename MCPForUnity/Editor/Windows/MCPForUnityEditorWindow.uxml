<ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" editor-extension-mode="True">
    <ui:ScrollView name="root-container" style="padding: 16px;">
        <!-- Title -->
        <ui:Label text="MCP For Unity" name="title" class="title" />

        <!-- Settings Section -->
        <ui:VisualElement name="settings-section" class="section">
            <ui:Label text="Settings" class="section-title" />
            <ui:VisualElement class="section-content">
                <ui:VisualElement class="setting-row">
                    <ui:Label text="Version:" class="setting-label" />
                    <ui:Label text="..." name="version-label" class="setting-value" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row">
                    <ui:Label text="Show Debug Logs:" class="setting-label" />
                    <ui:Toggle name="debug-logs-toggle" class="setting-toggle" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-column">
                    <ui:Label text="Script Validation Level:" class="setting-label" />
                    <uie:EnumField name="validation-level" class="setting-dropdown" />
                    <ui:Label name="validation-description" class="validation-description" />
                </ui:VisualElement>
                
                <!-- Advanced Settings (Collapsible) -->
                <ui:Foldout name="advanced-settings-foldout" text="Advanced Settings" class="advanced-settings-foldout">
                    <ui:VisualElement class="advanced-settings-content">
                        <ui:Label text="Path Overrides (leave empty for auto-detection):" class="advanced-label" />
                        <!-- UV Path Override -->
                        <ui:VisualElement class="override-row">
                            <ui:Label text="UV Path:" class="override-label" />
                            <ui:VisualElement class="status-indicator-small" name="uv-path-status" />
                        </ui:VisualElement>
                        <ui:VisualElement class="path-override-controls">
                            <ui:TextField name="uv-path-override" readonly="true" class="override-field" />
                            <ui:Button name="browse-uv-button" text="Browse" class="icon-button" />
                            <ui:Button name="clear-uv-button" text="Clear" class="icon-button" />
                        </ui:VisualElement>
                        
                        <!-- Server Git URL Override -->
                        <ui:Label text="Server Source Override:" class="advanced-label" style="margin-top: 10px;" />
                        <ui:Label text="Override the source used for uvx --from. Leave empty to use default package." class="help-text" />
                        <ui:VisualElement class="override-row">
                            <ui:Label text="Source Path/URL:" class="override-label" />
                        </ui:VisualElement>
                        <ui:VisualElement class="path-override-controls">
                            <ui:TextField name="git-url-override" placeholder-text="/path/to/Server or git+https://..." class="override-field" />
                            <ui:Button name="clear-git-url-button" text="Clear" class="icon-button" />
                        </ui:VisualElement>
                        <ui:Label text="Examples:" class="help-text" style="margin-top: 5px;" />
                        <ui:Label text="• Local: /Users/you/Projects/unity-mcp/Server" class="help-text" />
                        <ui:Label text="• Remote: git+https://github.com/CoplayDev/unity-mcp@v6.3.0#subdirectory=Server" class="help-text" />
                        <ui:Button name="clear-uvx-cache-button" text="Clear UVX Cache" class="secondary-button" style="margin-top: 12px; align-self: flex-start;" />
                    </ui:VisualElement>
                </ui:Foldout>
            </ui:VisualElement>
        </ui:VisualElement>

        <!-- Connection Section -->
        <ui:VisualElement name="connection-section" class="section">
            <ui:Label text="Connection" class="section-title" />
            <ui:VisualElement class="section-content">
                <ui:VisualElement class="setting-row">
                    <ui:Label text="Transport:" class="setting-label" />
                    <uie:EnumField name="transport-dropdown" class="setting-dropdown-inline" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row" name="http-url-row">
                    <ui:Label text="HTTP URL:" class="setting-label" />
                    <ui:TextField name="http-url" class="url-field" placeholder-text="http://localhost:8080" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row" name="start-http-row">
                    <ui:Label text="" class="setting-label" />
                    <ui:Button name="start-http-server-button" text="Start Local HTTP Server" class="secondary-button" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row" name="unity-socket-port-row">
                    <ui:Label text="Unity Socket Port:" class="setting-label" />
                    <ui:TextField name="unity-port" class="port-field" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row">
                    <ui:VisualElement class="status-container">
                        <ui:VisualElement name="status-indicator" class="status-dot" />
                        <ui:Label name="connection-status" text="Disconnected" class="status-text" />
                    </ui:VisualElement>
                    <ui:Button name="connection-toggle" text="Start" class="action-button" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row">
                    <ui:Label text="Health:" class="setting-label" />
                    <ui:VisualElement class="status-container">
                        <ui:VisualElement name="health-indicator" class="status-dot" />
                        <ui:Label name="health-status" text="Unknown" class="status-text" />
                    </ui:VisualElement>
                    <ui:Button name="test-connection-button" text="Test" class="action-button" />
                </ui:VisualElement>
            </ui:VisualElement>
        </ui:VisualElement>

        <!-- Client Configuration Section -->
        <ui:VisualElement name="client-section" class="section">
            <ui:Label text="Client Configuration" class="section-title" />
            <ui:VisualElement class="section-content">
                <ui:VisualElement class="setting-row">
                    <ui:Label text="Client:" class="setting-label" />
                    <ui:DropdownField name="client-dropdown" class="setting-dropdown-inline" />
                </ui:VisualElement>
                <ui:Button name="configure-all-button" text="Configure All Detected Clients" class="secondary-button" />
                <ui:VisualElement class="setting-row">
                    <ui:VisualElement class="status-container">
                        <ui:VisualElement name="client-status-indicator" class="status-dot" />
                        <ui:Label name="client-status" text="Not Configured" class="status-text" />
                    </ui:VisualElement>
                    <ui:Button name="configure-button" text="Configure" class="action-button" />
                </ui:VisualElement>
                <ui:VisualElement class="setting-row" name="claude-cli-path-row" style="display: none;">
                    <ui:Label text="Claude CLI Path:" class="setting-label-small" />
                    <ui:TextField name="claude-cli-path" readonly="true" class="path-display-field" />
                    <ui:Button name="browse-claude-button" text="Browse" class="icon-button" />
                </ui:VisualElement>

                <!-- Manual Configuration (Collapsible) -->
                <ui:Foldout name="manual-config-foldout" text="Manual Configuration" class="manual-config-foldout">
                    <ui:VisualElement class="manual-config-content">
                        <ui:Label text="Config Path:" class="config-label" />
                        <ui:VisualElement class="path-row">
                            <ui:TextField name="config-path" readonly="true" class="config-path-field" />
                            <ui:Button name="copy-path-button" text="Copy" class="icon-button" />
                            <ui:Button name="open-file-button" text="Open" class="icon-button" />
                        </ui:VisualElement>

                        <ui:Label text="Configuration:" class="config-label" />
                        <ui:VisualElement class="config-json-row">
                            <ui:TextField name="config-json" readonly="true" multiline="true" class="config-json-field" />
                            <ui:Button name="copy-json-button" text="Copy" class="icon-button-vertical" />
                        </ui:VisualElement>

                        <ui:Label text="Installation Steps:" class="config-label" />
                        <ui:Label name="installation-steps" class="installation-steps" />
                    </ui:VisualElement>
                </ui:Foldout>
            </ui:VisualElement>
        </ui:VisualElement>
    </ui:ScrollView>
</ui:UXML>
